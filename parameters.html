<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parameters &mdash; CLI Command Parser 2022.09.01 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_paramlinks.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parameter Groups" href="groups.html" />
    <link rel="prev" title="Commands" href="commands.html" />
    <link href="_static/rtd_custom.css" rel="stylesheet", type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CLI Command Parser
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="basic.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#options">Options</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#option">Option</a></li>
<li class="toctree-l3"><a class="reference internal" href="#flag">Flag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#triflag">TriFlag</a></li>
<li class="toctree-l3"><a class="reference internal" href="#counter">Counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#positionals">Positionals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#positional">Positional</a></li>
<li class="toctree-l3"><a class="reference internal" href="#subcommand">SubCommand</a></li>
<li class="toctree-l3"><a class="reference internal" href="#action">Action</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#others">Others</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#passthru">PassThru</a></li>
<li class="toctree-l3"><a class="reference internal" href="#actionflag">ActionFlag</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="groups.html">Parameter Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="subcommands.html">Subcommands</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Commands</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Scripts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CLI Command Parser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Parameters</li>
    <li class="wy-breadcrumbs-aside">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="parameters">
<h1>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading">ÔÉÅ</a></h1>
<p>Parameters are split into different types to simplify the initialization of each one, and to make it clearer (than,
say, argparse) to differentiate between parameter types.  The two major categories are <a class="reference internal" href="#options">Options</a> and <a class="reference internal" href="#positionals">Positionals</a>,
but there are <a class="reference internal" href="#others">Others</a> as well.  The base class for all Parameters is extensible, and user-defined
<code class="xref py py-class docutils literal notranslate"><span class="pre">Parameter</span></code> types are technically possible as well.</p>
<p>Many parameters support a <code class="docutils literal notranslate"><span class="pre">type</span></code> argument, which will result in the user-provided value being cast to that type before
being stored.  For the parameters that support a type, if not explicitly specified when initializing the parameter, the
type will be inferred automatically from any type annotations (see <span class="target" id="index-0"></span><a class="pep reference external" href="https://peps.python.org/pep-0484/"><strong>PEP 484</strong></a>) that are present.</p>
<p class="rubric" id="common-init-params">Common Initialization Parameters</p>
<p>All parameters that can be specified when initializing Parameters should be passed as keyword arguments unless
otherwise stated.</p>
<p>Common parameters that are supported by all Parameters:</p>
<dl class="field-list simple">
<dt class="field-odd" id="parameters:action">action</dt>
<dd class="field-odd"><p>The action to take on individual parsed values.  This usually does not need to be specified.  It is
automatically determined based on the specified <code class="docutils literal notranslate"><span class="pre">nargs</span></code> value.  Supported values depend on the actions defined for
each Parameter class.</p>
</dd>
<dt class="field-even" id="parameters:name">name</dt>
<dd class="field-even"><p>The name of the Parameter.  Defaults to the name assigned to it in a Command.  Shown in usage / help text
when no <code class="docutils literal notranslate"><span class="pre">metavar</span></code> value is specified.</p>
</dd>
<dt class="field-odd" id="parameters:metavar">metavar</dt>
<dd class="field-odd"><p>The name to use as a placeholder for values in usage / help messages.</p>
</dd>
<dt class="field-even" id="parameters:help">help</dt>
<dd class="field-even"><p>A brief description for the Parameter that will appear in <code class="docutils literal notranslate"><span class="pre">--help</span></code> text.</p>
</dd>
<dt class="field-odd" id="parameters:hide">hide</dt>
<dd class="field-odd"><p>Set this to <code class="docutils literal notranslate"><span class="pre">True</span></code> to prevent a Parameter from being included in usage / help text.</p>
</dd>
<dt class="field-even" id="parameters:show_default">show_default</dt>
<dd class="field-even"><p>Override the <a class="reference internal" href="configuration.html#usage &amp; help text options:show_defaults"><span class="std std-ref">show_defaults</span></a> setting for a given
Parameter to always or never include the default value in usage / help messages.  The default behavior is to follow
the <code class="docutils literal notranslate"><span class="pre">show_defaults</span></code> setting.</p>
</dd>
</dl>
<p>Common parameters that are supported when initializing most Parameters:</p>
<dl class="field-list">
<dt class="field-odd" id="parameters:default">default</dt>
<dd class="field-odd"><p>The default value to use when no argument is provided.  When a Parameter is not required, this defaults
to <code class="docutils literal notranslate"><span class="pre">None</span></code> if <code class="docutils literal notranslate"><span class="pre">nargs</span></code> would only accept 1 value, and to an empty list if multiple values would be accepted.  Not
used if the Parameter is required.  Some specialized Parameters have different defaults.</p>
</dd>
<dt class="field-even" id="parameters:required">required</dt>
<dd class="field-even"><p>Whether a Parameter must be provided or not.  Generally defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>, but Positionals, for
example, default to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-odd" id="parameters:choices">choices</dt>
<dd class="field-odd"><p>A container that holds the specific values that users must pick from.  By default, any value is allowed.</p>
</dd>
<dt class="field-even" id="parameters:nargs">nargs</dt>
<dd class="field-even"><p>The number of values that are expected/required when the Parameter is specified.  Generally defaults to 1.
When multiple arguments are accepted, they are collected in a list.  When only 0 - 1 arguments are accepted, they
will be stored / returned as-is.  Supported values:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">N</span></code> (an integer): Exactly <code class="docutils literal notranslate"><span class="pre">N</span></code> arguments must be provided.  If <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">&gt;</span> <span class="pre">1</span></code>, the arguments will be collected in
a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'?'</span></code>: One argument may be provided, but it is not required.  Generally only useful for Positional Parameters.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'*'</span></code>: Any number of arguments may be provided, including none.  The arguments will be collected in a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'+'</span></code>: One or more arguments may be provided.  The arguments will be collected in a list.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(N‚ÇÄ,</span> <span class="pre">N‚ÇÅ)</span></code> (a tuple of 2 integers): Accept exactly either <code class="docutils literal notranslate"><span class="pre">N‚ÇÄ</span></code> or <code class="docutils literal notranslate"><span class="pre">N‚ÇÅ</span></code> arguments.  <code class="docutils literal notranslate"><span class="pre">N‚ÇÄ</span></code> must be less
than <code class="docutils literal notranslate"><span class="pre">N‚ÇÅ</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">(N,</span> <span class="pre">None)</span></code> (a tuple of an integer and <code class="docutils literal notranslate"><span class="pre">None</span></code>): Similar to <code class="docutils literal notranslate"><span class="pre">'+'</span></code>, accept a minimum of <code class="docutils literal notranslate"><span class="pre">N</span></code> arguments, or
any number of arguments greater than <code class="docutils literal notranslate"><span class="pre">N</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">{N‚ÇÄ,</span> <span class="pre">N‚ÇÅ,</span> <span class="pre">...,</span> <span class="pre">N‚Çì}</span></code> (a set of integers): Accept any specific number of
arguments in the set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">range(...)</span></code> (a <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#range" title="(in Python v3.10)"><code class="docutils literal notranslate"><span class="pre">range</span></code></a> object):  Similar to the set of integers, accept any number of arguments
for which <code class="docutils literal notranslate"><span class="pre">N</span> <span class="pre">in</span> <span class="pre">range(...)</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code> for the specified range.  Can be used, for example, to accept only an
even number of arguments, such as <code class="docutils literal notranslate"><span class="pre">range(0,</span> <span class="pre">6,</span> <span class="pre">2)</span></code> to accept 0, 2, or 4 values.</p></li>
</ul>
</div></blockquote>
</dd>
<dt class="field-odd" id="parameters:type">type</dt>
<dd class="field-odd"><p>A callable (function, class, etc.) that accepts a single string argument to be used to transform parsed
argument values.  It will be used before evaluating whether the value is in <code class="docutils literal notranslate"><span class="pre">choices</span></code>, if specified.  If <code class="docutils literal notranslate"><span class="pre">nargs</span></code>
accepts multiple values, then this will be called on each value individually before appending it to the list of
values.  By default, no transformation is performed, and values will be strings.  If not specified, but a type
annotation is detected, then that annotation will be used as if it was provided here.  When both are present, this
argument takes precedence.</p>
</dd>
</dl>
<section id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Options are parameters that may be provided in any order, and are roughly equivalent to keyword arguments to functions.
They are typically not required by default, and often have both long and short forms, where long forms typically have
a <code class="docutils literal notranslate"><span class="pre">--</span></code> prefix, and short forms have a <code class="docutils literal notranslate"><span class="pre">-</span></code> prefix.  The long form is automatically added, if not explicitly
specified, based on the name of the Parameter attribute.</p>
<p class="rubric" id="options-init-params">Common Initialization Parameters - Options</p>
<p>Options support two additional initialization parameters:</p>
<dl class="field-list">
<dt class="field-odd" id="options:*option_strs">*option_strs</dt>
<dd class="field-odd"><p>One or more long or short form option strings may be provided positionally, similar to how they
would be specified when using <code class="docutils literal notranslate"><span class="pre">argparse</span></code>.</p>
<blockquote>
<div><ul class="simple">
<li><p>Option strings cannot end with <code class="docutils literal notranslate"><span class="pre">-</span></code> or contain <code class="docutils literal notranslate"><span class="pre">=</span></code>.</p></li>
<li><p>Short forms must begin with a <code class="docutils literal notranslate"><span class="pre">-</span></code> prefix, and may be one or more characters.  They may not contain any other
<code class="docutils literal notranslate"><span class="pre">-</span></code> characters.</p></li>
<li><p>Long forms must begin with a <code class="docutils literal notranslate"><span class="pre">--</span></code> prefix, and may be one or more characters.  If provided, the automatically
generated long form based on the Parameter‚Äôs name will not be added.</p></li>
</ul>
</div></blockquote>
</dd>
<dt class="field-even" id="options:name_mode">name_mode</dt>
<dd class="field-even"><p>Override the configured <a class="reference internal" href="configuration.html#parsing options:option_name_mode"><span class="std std-ref">option_name_mode</span></a> for this
Option/Flag/Counter/etc.</p>
</dd>
</dl>
<section id="option">
<h3>Option<a class="headerlink" href="#option" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>The generic <code class="xref py py-class docutils literal notranslate"><span class="pre">Option</span></code> parameter, that accepts arbitrary values or lists of values.</p>
<p>Given the following example Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommand</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>All of the following are valid arguments:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ prog.py --foo bar baz
$ prog.py --foo bar
$ prog.py --foo=bar
$ prog.py -f bar baz
$ prog.py -f bar
$ prog.py -f=bar
$ prog.py -fbar
</pre></div>
</div>
<p>Inside <code class="docutils literal notranslate"><span class="pre">MyCommand</span></code>, the resulting value of <code class="docutils literal notranslate"><span class="pre">self.foo</span></code> would be <code class="docutils literal notranslate"><span class="pre">['bar']</span></code> or <code class="docutils literal notranslate"><span class="pre">['bar',</span> <span class="pre">'baz']</span></code> for each of those
inputs, respectively.</p>
</section>
<section id="flag">
<h3>Flag<a class="headerlink" href="#flag" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="api/cli_command_parser.parameters.options.html#cli_command_parser.parameters.options.Flag" title="cli_command_parser.parameters.options.Flag"><code class="xref py py-class docutils literal notranslate"><span class="pre">Flag</span></code></a> parameters typically represent boolean values, and do not accept any values.  By default, Flag
parameters have a default value of <code class="docutils literal notranslate"><span class="pre">False</span></code>, and will change to <code class="docutils literal notranslate"><span class="pre">True</span></code> if provided by a user.  By specifying
<code class="docutils literal notranslate"><span class="pre">default=True</span></code>, then that behavior is reversed.  It is also possible to specify any default value with a different
<code class="docutils literal notranslate"><span class="pre">const</span></code> value to use if the flag is provided.</p>
<p id="flag-init-params"><strong>Unique Flag initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="flag:action">action</dt>
<dd class="field-odd"><p>While not specific to Flags, this is one example of a Parameter where it may be desirable to specify a
value here.  The default action is <code class="docutils literal notranslate"><span class="pre">store_const</span></code>, but <code class="docutils literal notranslate"><span class="pre">append_const</span></code> is also supported.</p>
</dd>
<dt class="field-even" id="flag:const">const</dt>
<dd class="field-even"><p>The constant value to store / append.  If a <code class="docutils literal notranslate"><span class="pre">default</span></code> value is provided that is not a bool, then this
must also be provided.  Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code> when <code class="docutils literal notranslate"><span class="pre">default</span></code> is <code class="docutils literal notranslate"><span class="pre">False</span></code> (the default when it is not specified),
and to <code class="docutils literal notranslate"><span class="pre">False</span></code> when <code class="docutils literal notranslate"><span class="pre">default</span></code> is <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-odd" id="flag:nargs">nargs</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
<dt class="field-even" id="flag:type">type</dt>
<dd class="field-even"><p>Not supported.</p>
</dd>
<dt class="field-odd" id="flag:choices">choices</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
</dl>
<p><a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/simple_flags.py">Example command</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">)</span>  <span class="c1"># the default ``default`` value is False</span>
    <span class="n">bar</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;--no-bar&#39;</span><span class="p">,</span> <span class="s1">&#39;-B&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;self.foo = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">foo</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;self.bar = </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bar</span><span class="si">!r}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ simple_flags.py
self.foo = False
self.bar = True

$ simple_flags.py -f --no-bar
self.foo = True
self.bar = False

$ simple_flags.py -h
usage: simple_flags.py [--foo] [--no-bar] [--help]

Optional arguments:
  --foo, -f                   (default: False)
  --no-bar, -B                (default: True)
  --help, -h                  Show this help message and exit (default: False)
</pre></div>
</div>
</section>
<section id="triflag">
<h3>TriFlag<a class="headerlink" href="#triflag" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>A trinary / ternary Flag.  While <a class="reference internal" href="#flag"><span class="std std-ref">Flag</span></a> only supports 1 constant when provided, with 1 default if not
provided, this class accepts a pair of constants for the primary and alternate values to store, along with a
separate default.</p>
<p>A typical use case is that there is some functionality that may be automatically enabled or disabled, but users
should be able to explicitly enable / disable it as well.  To support this, the default behavior results in None being
stored by default, and True / False being stored when the positive / negative (primary / alternate) versions are
provided, respectively.</p>
<p id="triflag-init-params"><strong>Unique TriFlag initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="triflag:option_strs">option_strs</dt>
<dd class="field-odd"><p>The primary long and/or short option prefixes for this option.  If no long prefixes are
specified, then one will automatically be added based on the name assigned to this parameter.</p>
</dd>
<dt class="field-even" id="triflag:consts">consts</dt>
<dd class="field-even"><p>A 2-tuple containing the <code class="docutils literal notranslate"><span class="pre">(primary,</span> <span class="pre">alternate)</span></code> values to store.  Defaults to <code class="docutils literal notranslate"><span class="pre">(True,</span> <span class="pre">False)</span></code>.</p>
</dd>
<dt class="field-odd" id="triflag:alt_prefix">alt_prefix</dt>
<dd class="field-odd"><p>The prefix to add to the assigned name for the alternate long form.  Ignored if <code class="docutils literal notranslate"><span class="pre">alt_long</span></code> is
specified.  Defaults to <code class="docutils literal notranslate"><span class="pre">no</span></code> if <code class="docutils literal notranslate"><span class="pre">alt_long</span></code> is not specified.</p>
</dd>
<dt class="field-even" id="triflag:alt_long">alt_long</dt>
<dd class="field-even"><p>The alternate long form to use.</p>
</dd>
<dt class="field-odd" id="triflag:alt_short">alt_short</dt>
<dd class="field-odd"><p>The alternate short form to use.</p>
</dd>
<dt class="field-even" id="triflag:default">default</dt>
<dd class="field-even"><p>The default value to use if neither the primary or alternate options are provided.  Defaults to None.</p>
</dd>
<dt class="field-odd" id="triflag:name_mode">name_mode</dt>
<dd class="field-odd"><p>Override the configured <a class="reference internal" href="configuration.html#parsing options:option_name_mode"><span class="std std-ref">option_name_mode</span></a> for the TriFlag.</p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">MyCommand</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">foo</span> <span class="o">=</span> <span class="n">TriFlag</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="n">alt_short</span><span class="o">=</span><span class="s1">&#39;-F&#39;</span><span class="p">,</span> <span class="n">name_mode</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Enable/disable foo (default: automatically picked)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Help text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">--</span><span class="n">foo</span><span class="p">,</span> <span class="o">-</span><span class="n">f</span>                   <span class="n">Enable</span><span class="o">/</span><span class="n">disable</span> <span class="n">foo</span> <span class="p">(</span><span class="n">default</span><span class="p">:</span> <span class="n">automatically</span> <span class="n">picked</span><span class="p">)</span>
  <span class="o">--</span><span class="n">no</span><span class="o">-</span><span class="n">foo</span><span class="p">,</span> <span class="o">-</span><span class="n">F</span>
</pre></div>
</div>
<p>Results:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">MyCommand</span><span class="o">.</span><span class="n">parse</span><span class="p">([</span><span class="s1">&#39;--foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">foo</span>
<span class="go">True</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">MyCommand</span><span class="o">.</span><span class="n">parse</span><span class="p">([</span><span class="s1">&#39;--no-foo&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">foo</span>
<span class="go">False</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">MyCommand</span><span class="o">.</span><span class="n">parse</span><span class="p">([])</span><span class="o">.</span><span class="n">foo</span> <span class="ow">is</span> <span class="kc">None</span>
<span class="go">True</span>
</pre></div>
</div>
</section>
<section id="counter">
<h3>Counter<a class="headerlink" href="#counter" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="api/cli_command_parser.parameters.options.html#cli_command_parser.parameters.options.Counter" title="cli_command_parser.parameters.options.Counter"><code class="xref py py-class docutils literal notranslate"><span class="pre">Counter</span></code></a> parameters are similar to Flags, but they may be specified multiple times, and they support an
optional integer value to explicitly increase their stored value by that amount.  One common use case for Counters
is for verbosity levels, where logging verbosity would increase with the number of <code class="docutils literal notranslate"><span class="pre">-v</span></code> arguments that are provided.</p>
<p id="counter-init-params"><strong>Unique Counter initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="counter:default">default</dt>
<dd class="field-odd"><p>The default value if the Parameter is not specified.  This value is also be used as the initial value
that will be incremented when the flag is provided.  Defaults to <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
</dd>
<dt class="field-even" id="counter:const">const</dt>
<dd class="field-even"><p>The value by which the stored value should increase whenever the flag is provided. Defaults to <code class="docutils literal notranslate"><span class="pre">1</span></code>.
If a different <code class="docutils literal notranslate"><span class="pre">const</span></code> value is used, and if an explicit value is provided by a user, the user-provided value
will be added verbatim - it will NOT be multiplied by <code class="docutils literal notranslate"><span class="pre">const</span></code>.</p>
</dd>
<dt class="field-odd" id="counter:nargs">nargs</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
<dt class="field-even" id="counter:type">type</dt>
<dd class="field-even"><p>Not supported.</p>
</dd>
<dt class="field-odd" id="counter:choices">choices</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
</dl>
<p>Given the following example Command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">NoisyCommand</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">verbose</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Increase logging verbosity (can specify multiple times)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>All of the following would result in <code class="docutils literal notranslate"><span class="pre">self.verbose</span></code> being <code class="docutils literal notranslate"><span class="pre">2</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ prog.py -v -v
$ prog.py -vv
$ prog.py --verbose -v
$ prog.py -v2
$ prog.py -v=2
$ prog.py -v 2
$ prog.py --verbose=2
</pre></div>
</div>
<p>When provided, the short forms of Option*, Flag, and Counter parameters can be chained together without a space or
additional <code class="docutils literal notranslate"><span class="pre">-</span></code> prefix character.</p>
<p>*: Options are less flexible when combining since they require a value.  Only one may be combined with other short
forms, and it must be the last parameter in the combo so that it immediately precedes its value.</p>
</section>
</section>
<section id="positionals">
<h2>Positionals<a class="headerlink" href="#positionals" title="Permalink to this heading">ÔÉÅ</a></h2>
<p>Positionals are parameters that must be provided in a specific order.  They are typically required by default, and they
do not have any prefix before values.</p>
<p>Arguments for Positional parameters may be provided before, after, and between <a class="reference internal" href="#options">Options</a>, as long as the immediately
preceding optional parameter accepts a bounded number of arguments and those values were provided.</p>
<p>The order that positional parameters are defined in a given <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> determines
the order in which they must be provided; i.e., the top-most positional parameters must be provided first.</p>
<section id="positional">
<h3>Positional<a class="headerlink" href="#positional" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>The generic <code class="xref py py-class docutils literal notranslate"><span class="pre">Positional</span></code> parameter, that accepts arbitrary values or lists of
values.</p>
<p id="positional-init-params"><strong>Unique Positional initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="positional:nargs">nargs</dt>
<dd class="field-odd"><p>The number of values that are expected/required for the Parameter.  Defaults to 1.  Use a value that
allows 0 values to have the same effect as making the Parameter not required (the <code class="docutils literal notranslate"><span class="pre">required</span></code> option is not
supported for Positional Parameters).  Only the last Positional in a given <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> may allow a
variable / unbound number of arguments.</p>
</dd>
<dt class="field-even" id="positional:default">default</dt>
<dd class="field-even"><p>Only supported when <code class="docutils literal notranslate"><span class="pre">action='store'</span></code> and 0 values are allowed by the specified <code class="docutils literal notranslate"><span class="pre">nargs</span></code>.  Defaults
to <code class="docutils literal notranslate"><span class="pre">None</span></code> under those conditions.</p>
</dd>
</dl>
<p><a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/echo.py">Example command</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Echo</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The text to print&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ echo.py Hello World
Hello World
</pre></div>
</div>
</section>
<section id="subcommand">
<h3>SubCommand<a class="headerlink" href="#subcommand" title="Permalink to this heading">ÔÉÅ</a></h3>
<p>The <a class="reference internal" href="api/cli_command_parser.parameters.choice_map.html#cli_command_parser.parameters.choice_map.SubCommand" title="cli_command_parser.parameters.choice_map.SubCommand"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubCommand</span></code></a> parameter allows additional <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> classes to be registered as subcommands of the
Command that contains the SubCommand parameter.  A given Command may only contain one SubCommand parameter.</p>
<p>For more information, see <a class="reference internal" href="subcommands.html"><span class="doc">Subcommands</span></a>.</p>
</section>
<section id="action">
<h3>Action<a class="headerlink" href="#action" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="api/cli_command_parser.parameters.choice_map.html#cli_command_parser.parameters.choice_map.Action" title="cli_command_parser.parameters.choice_map.Action"><code class="xref py py-class docutils literal notranslate"><span class="pre">Action</span></code></a> parameters are similar to <a class="reference internal" href="api/cli_command_parser.parameters.choice_map.html#cli_command_parser.parameters.choice_map.SubCommand" title="cli_command_parser.parameters.choice_map.SubCommand"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubCommand</span></code></a> parameters, but allow methods in <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a>
classes to be registered as a callable to be executed based on a user‚Äôs choice instead of separate sub Commands.  The
order of the Action relative to any other Parameters that are provided positionally determines where arguments for it
must be provided.</p>
<p>When there are multiple choices of functions that may be called for a given program, Actions are better suited to use
cases where all of those functions share the same parameters.  If the target functions require different / additional
parameters, then using a <a class="reference internal" href="api/cli_command_parser.parameters.choice_map.html#cli_command_parser.parameters.choice_map.SubCommand" title="cli_command_parser.parameters.choice_map.SubCommand"><code class="xref py py-class docutils literal notranslate"><span class="pre">SubCommand</span></code></a> with separate sub <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> classes may make more sense.</p>
<p id="action-init-params"><strong>Unique Action initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="action:title">title</dt>
<dd class="field-odd"><p>The title to use for help text sections containing the choices for the Parameter.  Defaults to
<code class="docutils literal notranslate"><span class="pre">Actions</span></code>.</p>
</dd>
<dt class="field-even" id="action:description">description</dt>
<dd class="field-even"><p>The description to be used in help text for the Parameter.</p>
</dd>
<dt class="field-odd" id="action:nargs">nargs</dt>
<dd class="field-odd"><p>Not supported.  Automatically calculated / maintained based on registered choices (target methods).</p>
</dd>
<dt class="field-even" id="action:type">type</dt>
<dd class="field-even"><p>Not supported.</p>
</dd>
<dt class="field-odd" id="action:choices">choices</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
</dl>
<p>After creating an Action in a Command, it should be used as a decorator for the target methods that will be called,
similar to the way that <code class="docutils literal notranslate"><span class="pre">&#64;property.setter</span></code> would be used to register a setter method for a given property.  When
registering a method, the following keyword-only parameters are supported:</p>
<dl class="field-list simple" id="action-register-params">
<dt class="field-odd" id="action:choice">choice</dt>
<dd class="field-odd"><p>The text that users must provide for the registered method to be called.  Defaults to the name of the method.</p>
</dd>
<dt class="field-even" id="action:help">help</dt>
<dd class="field-even"><p>The help text / description to be displayed for the choice.  Defaults to the method‚Äôs docstring, if present.</p>
</dd>
<dt class="field-odd" id="action:default">default</dt>
<dd class="field-odd"><p>If true, the method will be registered as the default action to take when no other choice is specified.  When
marking a method as the default, if you want it to also be available as an explicit choice, then a <code class="docutils literal notranslate"><span class="pre">choice</span></code> value
must be specified - the method name is not automatically used when <code class="docutils literal notranslate"><span class="pre">default=True</span></code>.  Only one method can be
registered as the default for a given Action.</p>
</dd>
</dl>
<p><a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/action_with_args.py">Example command</a> that uses
actions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Example</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">action</span> <span class="o">=</span> <span class="n">Action</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;The action to take&#39;</span><span class="p">)</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The text to print&#39;</span><span class="p">)</span>

    <span class="c1"># Registering an action can be as simple as adding it as a decorator - the method&#39;s name will be registered as</span>
    <span class="c1"># the choice for users to provide, and the docstring will be used as the help text.</span>
    <span class="nd">@action</span>
    <span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Echo the provided text&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

    <span class="c1"># Keyword arguments can be provided to override the defaults - `help` here takes precedence over the docstring</span>
    <span class="nd">@action</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Split the provided text so that each word is on a new line&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">split</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Print the provided text on separate lines&quot;&quot;&quot;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

    <span class="c1"># This choice value will be used instead of the method name</span>
    <span class="nd">@action</span><span class="p">(</span><span class="n">choice</span><span class="o">=</span><span class="s1">&#39;double&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Print the provided text twice&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">print_twice</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>

    <span class="c1"># Calling the action directly is just a shortcut for .register - both can be used the same way</span>
    <span class="nd">@action</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;Reverse the provided text&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">reverse</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">reversed</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">)))</span>
</pre></div>
</div>
<p>The resulting help text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ action_with_args.py -h
usage: action_with_args.py {echo,split,double,reverse} TEXT [--help]

Positional arguments:

Actions:
  {echo,split,double,reverse}
    echo                      Echo the provided text
    split                     Split the provided text so that each word is on a new line
    double                    Print the provided text twice
    reverse                   Reverse the provided text

  TEXT [TEXT ...]             The text to print

Optional arguments:
  --help, -h                  Show this help message and exit (default: False)
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ action_with_args.py echo one two
one two

$ action_with_args.py split one two
one
two
</pre></div>
</div>
</section>
</section>
<section id="others">
<h2>Others<a class="headerlink" href="#others" title="Permalink to this heading">ÔÉÅ</a></h2>
<section id="passthru">
<h3>PassThru<a class="headerlink" href="#passthru" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="api/cli_command_parser.parameters.pass_thru.html#cli_command_parser.parameters.pass_thru.PassThru" title="cli_command_parser.parameters.pass_thru.PassThru"><code class="xref py py-class docutils literal notranslate"><span class="pre">PassThru</span></code></a> is a parameter that allows all remaining arguments to be collected, without processing them.  Only
one PassThru parameter may exist in a given <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a>.  When provided, it must be preceded by <code class="docutils literal notranslate"><span class="pre">--</span></code> and a
space.</p>
<p id="passthru-init-params"><strong>Unique PassThru initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="passthru:nargs">nargs</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
<dt class="field-even" id="passthru:type">type</dt>
<dd class="field-even"><p>Not supported.</p>
</dd>
<dt class="field-odd" id="passthru:choices">choices</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
</dl>
<p><a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/command_wrapper.py">Example command</a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Wrapper</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">hosts</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The hosts on which the given command should be run&#39;</span><span class="p">)</span>
    <span class="n">command</span> <span class="o">=</span> <span class="n">PassThru</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;The command to run&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">host</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hosts</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Would run on </span><span class="si">{</span><span class="n">host</span><span class="si">}</span><span class="s1">: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">command</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example help text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ command_wrapper.py -h
usage: command_wrapper.py HOSTS [--help] [-- COMMAND]

Positional arguments:
  HOSTS [HOSTS ...]           The hosts on which the given command should be run

Optional arguments:
  COMMAND                     The command to run (default: None)
  --help, -h                  Show this help message and exit (default: False)
</pre></div>
</div>
<p>Example usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ command_wrapper.py one two -- service foo restart
Would run on one: [&#39;service&#39;, &#39;foo&#39;, &#39;restart&#39;]
Would run on two: [&#39;service&#39;, &#39;foo&#39;, &#39;restart&#39;]
</pre></div>
</div>
</section>
<section id="actionflag">
<h3>ActionFlag<a class="headerlink" href="#actionflag" title="Permalink to this heading">ÔÉÅ</a></h3>
<p><a class="reference internal" href="api/cli_command_parser.parameters.options.html#cli_command_parser.parameters.options.ActionFlag" title="cli_command_parser.parameters.options.ActionFlag"><code class="xref py py-class docutils literal notranslate"><span class="pre">ActionFlag</span></code></a> parameters act like a combination of <a class="reference internal" href="#flag"><span class="std std-ref">Flag</span></a> and <a class="reference internal" href="#action"><span class="std std-ref">Action</span></a>
parameters.  Like Flags, they are not required, and they can be combined with other <a class="reference internal" href="#options"><span class="std std-ref">Options</span></a>.  Like
Actions, they allow methods in <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> classes to be registered as execution targets.</p>
<p>When ActionFlag arguments are provided, the associated methods are called in the order that was specified when marking
those methods as ActionFlags.  Execution order is also customizable relative to when the <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a>
method is called, so each ActionFlag must indicate whether it should run before or after main.  Helper decorators
are provided to simplify this distinction: <code class="xref py py-data docutils literal notranslate"><span class="pre">before_main</span></code> and <code class="xref py py-data docutils literal notranslate"><span class="pre">after_main</span></code>.</p>
<p id="actionflag-init-params"><strong>Unique ActionFlag initialization parameters:</strong></p>
<dl class="field-list simple">
<dt class="field-odd" id="actionflag:order">order</dt>
<dd class="field-odd"><p>The priority / order for execution, relative to other ActionFlags, if others would also be executed.  Two
ActionFlags in a given <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> may not have the same combination of <code class="docutils literal notranslate"><span class="pre">before_main</span></code> and <code class="docutils literal notranslate"><span class="pre">order</span></code> values.
ActionFlags with lower <code class="docutils literal notranslate"><span class="pre">order</span></code> values are executed before those with higher values.  The <code class="docutils literal notranslate"><span class="pre">--help</span></code> action is
implemented as an ActionFlag with <code class="docutils literal notranslate"><span class="pre">order=float('-inf')</span></code>.</p>
</dd>
<dt class="field-even" id="actionflag:func">func</dt>
<dd class="field-even"><p>The function (any callable) to call.  Instead of passing a value here, ActionFlag can be used as a
decorator for a method that should be called.</p>
</dd>
<dt class="field-odd" id="actionflag:before_main">before_main</dt>
<dd class="field-odd"><p>Whether the action should be executed before the <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a> method or after it.  Defaults
to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
</dd>
<dt class="field-even" id="actionflag:always_available">always_available</dt>
<dd class="field-even"><p>Whether the action should always be available to be called, even if parsing failed.  Only
allowed when <code class="docutils literal notranslate"><span class="pre">before_main=True</span></code>.  The intended use case is for actions like <code class="docutils literal notranslate"><span class="pre">--help</span></code> text.</p>
</dd>
<dt class="field-odd" id="actionflag:nargs">nargs</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
<dt class="field-even" id="actionflag:type">type</dt>
<dd class="field-even"><p>Not supported.</p>
</dd>
<dt class="field-odd" id="actionflag:choices">choices</dt>
<dd class="field-odd"><p>Not supported.</p>
</dd>
</dl>
<p>Example command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Build</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">build_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The target build directory&#39;</span><span class="p">)</span>
    <span class="n">install_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The target install directory&#39;</span><span class="p">)</span>
    <span class="n">backup_dir</span><span class="p">:</span> <span class="n">Path</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Directory in which backups should be stored&#39;</span><span class="p">)</span>

    <span class="nd">@before_main</span><span class="p">(</span><span class="s1">&#39;-b&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Backup the install directory before building&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">backup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">install_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">backup_dir</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="s1">&#39;make&#39;</span><span class="p">,</span> <span class="s1">&#39;build&#39;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="o">.</span><span class="n">as_posix</span><span class="p">()])</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">install_dir</span><span class="p">)</span>

    <span class="nd">@after_main</span><span class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Cleanup the build directory after installing&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">cleanup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">shutil</span><span class="o">.</span><span class="n">rmtree</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">build_dir</span><span class="p">)</span>
</pre></div>
</div>
<p>By default, the ActionFlags configured to run after <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a> will not run if an exception was raised in
<a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a>.  It is possible to specify <a class="reference internal" href="api/cli_command_parser.config.html#cli_command_parser.config.CommandConfig.always_run_after_main" title="cli_command_parser.config.CommandConfig.always_run_after_main"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CommandConfig.always_run_after_main</span></code></a> to allow
<a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command._after_main_" title="cli_command_parser.commands.Command._after_main_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command._after_main_()</span></code></a> (and therefore ActionFlags registered to run after main) to be called even if an
exception was raised.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="commands.html" class="btn btn-neutral float-left" title="Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="groups.html" class="btn btn-neutral float-right" title="Parameter Groups" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Doug Skrypa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>