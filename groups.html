<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Parameter Groups &mdash; CLI Command Parser 2023.04.08 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_paramlinks.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Subcommands" href="subcommands.html" />
    <link rel="prev" title="Parameters" href="parameters.html" />
    <link href="_static/rtd_custom.css" rel="stylesheet", type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CLI Command Parser
          </a>
              <div class="version">
                2023.04.08
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Parameter Groups</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#mutually-exclusive">Mutually Exclusive</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mutually-dependent">Mutually Dependent</a></li>
<li class="toctree-l2"><a class="reference internal" href="#combining-group-types">Combining Group Types</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-it-works">How it Works</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#mutually-exclusive-outer-group">Mutually Exclusive Outer Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mutually-dependent-outer-group">Mutually Dependent Outer Group</a></li>
<li class="toctree-l4"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="subcommands.html">Subcommands</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Script Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Scripts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CLI Command Parser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Parameter Groups</li>
    <li class="wy-breadcrumbs-aside">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="parameter-groups">
<h1>Parameter Groups<a class="headerlink" href="#parameter-groups" title="Permalink to this heading"></a></h1>
<p>Parameters can be grouped so that they are mutually exclusive or mutually dependent, or just to organize them in help
text.  Arbitrary levels of nesting are supported, including mutually dependent groups inside mutually exclusive groups,
and vice versa.</p>
<p>Groups are defined by initializing a <a class="reference internal" href="api/cli_command_parser.parameters.groups.html#cli_command_parser.parameters.groups.ParamGroup" title="cli_command_parser.parameters.groups.ParamGroup"><code class="xref py py-class docutils literal notranslate"><span class="pre">ParamGroup</span></code></a> as a context manager, and defining the member Parameters
inside the <code class="docutils literal notranslate"><span class="pre">with</span></code> block.</p>
<p class="rubric" id="group-init-params">Initialization Parameters</p>
<dl class="field-list simple">
<dt class="field-odd" id="parameter groups:name">name<span class="colon">:</span></dt>
<dd class="field-odd"><p>The name of the group to appear in help text.  Ignored if <code class="docutils literal notranslate"><span class="pre">description</span></code> is provided.</p>
</dd>
<dt class="field-even" id="parameter groups:description">description<span class="colon">:</span></dt>
<dd class="field-even"><p>The description (header) for this group in help text.  Defaults to <code class="docutils literal notranslate"><span class="pre">{name}</span> <span class="pre">options</span></code> if <code class="docutils literal notranslate"><span class="pre">name</span></code> is
specified.  If <a class="reference internal" href="configuration.html#usage &amp; help text options:show_group_type"><span class="std std-ref">show_group_type</span></a> is True (the default), and the group
is mutually exclusive/dependent, then <code class="docutils literal notranslate"><span class="pre">(mutually</span> <span class="pre">{type})</span></code> will be appended to this text.  If no description or name
is provided and <code class="docutils literal notranslate"><span class="pre">show_group_type</span></code> is True, then the entire description will default to
<code class="docutils literal notranslate"><span class="pre">Mutually</span> <span class="pre">{type}</span> <span class="pre">options</span></code>, otherwise it will be <code class="docutils literal notranslate"><span class="pre">Optional</span> <span class="pre">arguments</span></code>.</p>
</dd>
<dt class="field-odd" id="parameter groups:mutually_exclusive">mutually_exclusive<span class="colon">:</span></dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if Parameters in the group are mutually exclusive, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.  I.e., if
one Parameter in the group is provided, then no other Parameter in the group will be allowed.  Cannot be combined
with <code class="docutils literal notranslate"><span class="pre">mutually_dependent</span></code>.</p>
</dd>
<dt class="field-even" id="parameter groups:mutually_dependent">mutually_dependent<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if Parameters in the group are mutually dependent, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.  I.e., if
one Parameter in the group is provided, then all other Parameters in the group must also be provided.  Cannot be
combined with <code class="docutils literal notranslate"><span class="pre">mutually_exclusive</span></code>.</p>
</dd>
<dt class="field-odd" id="parameter groups:required">required<span class="colon">:</span></dt>
<dd class="field-odd"><p>Whether at least one Parameter in the group is required or not.  If it is required, then an exception
will be raised if the user did not provide a value for any Parameters in the group.  Defaults to <code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
</dd>
<dt class="field-even" id="parameter groups:hide">hide<span class="colon">:</span></dt>
<dd class="field-even"><p>Set this to <code class="docutils literal notranslate"><span class="pre">True</span></code> to hide the group and all of its members so they will not be included in usage / help
text.</p>
</dd>
</dl>
<p>One <a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/rest_api_wrapper.py">example</a> use case for a basic group is to indicate that common arguments are
accepted by all subcommands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">ApiWrapper</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">sub_cmd</span> <span class="o">=</span> <span class="n">SubCommand</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;The command to run&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="s1">&#39;Common&#39;</span><span class="p">):</span>
        <span class="n">verbose</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Increase logging verbosity (can specify multiple times)&#39;</span><span class="p">)</span>
        <span class="n">env</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-e&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;dev&#39;</span><span class="p">,</span> <span class="s1">&#39;qa&#39;</span><span class="p">,</span> <span class="s1">&#39;uat&#39;</span><span class="p">,</span> <span class="s1">&#39;prod&#39;</span><span class="p">),</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;prod&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Environment to connect to&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Using that example, we can see the common options group in a subcommand’s help text:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py show -h
usage: rest_api_wrapper.py show {foo,bar,baz} [--verbose [VERBOSE]] [--env {dev,qa,uat,prod}] [--help] [--ids IDS]

Positional arguments:
  {foo,bar,baz}               The type of object to show

Optional arguments:
  --help, -h                  Show this help message and exit
  --ids IDS, -i IDS           The IDs of the objects to show

Common options:
  --verbose [VERBOSE], -v [VERBOSE]
                              Increase logging verbosity (can specify multiple times) (default: 0)
  --env {dev,qa,uat,prod}, -e {dev,qa,uat,prod}
                              Environment to connect to (default: &#39;prod&#39;)
</pre></div>
</div>
<section id="mutually-exclusive">
<h2>Mutually Exclusive<a class="headerlink" href="#mutually-exclusive" title="Permalink to this heading"></a></h2>
<p>In the following example, <code class="docutils literal notranslate"><span class="pre">wait</span></code> and <code class="docutils literal notranslate"><span class="pre">no_wait</span></code> are mutually exclusive - if both are provided, then an exception is
raised.  The <code class="docutils literal notranslate"><span class="pre">tasks</span></code> and <code class="docutils literal notranslate"><span class="pre">verbose</span></code> parameters are not in the group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">TaskRunner</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The tasks to run&#39;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="s1">&#39;Wait Options&#39;</span><span class="p">,</span> <span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">wait</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-w&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Seconds to wait (0 or below to wait indefinitely)&#39;</span><span class="p">)</span>
        <span class="n">no_wait</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-W&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Do not wait&#39;</span><span class="p">)</span>

    <span class="n">verbose</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Increase logging verbosity (can specify multiple times)&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unlike using <code class="docutils literal notranslate"><span class="pre">parser.add_mutually_exclusive_group(...)</span></code> from <code class="docutils literal notranslate"><span class="pre">argparse</span></code>, mutually exclusive ParamGroups can
have a name / description that will be displayed in <code class="docutils literal notranslate"><span class="pre">--help</span></code> text, just like they can for normal groups.</p>
</div>
<p>By making a group both mutually exclusive and required, we can ensure that one argument is always provided.  Given the
following <a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/rest_api_wrapper.py">example</a> snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">FindBaz</span><span class="p">(</span><span class="n">Find</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;baz&#39;</span><span class="p">,</span> <span class="s1">&#39;bazs&#39;</span><span class="p">),</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Find baz objects&#39;</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">description</span><span class="o">=</span><span class="s1">&#39;Filter Choices&#39;</span><span class="p">,</span> <span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="n">foo</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-f&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Find baz objects related to the foo object with the specified name&#39;</span><span class="p">)</span>
        <span class="n">bar</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-b&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;ID&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Find baz objects related to the bar object with the specified ID&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">find_objects</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">foo</span><span class="p">:</span>
            <span class="o">...</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c1"># self.bar was provided</span>
            <span class="o">...</span>
</pre></div>
</div>
<p>Either argument can be provided, but they cannot be combined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py find baz -b 42 -f test
argument conflict - the following arguments cannot be combined: --foo / -f, --bar / -b (they are mutually exclusive - only one is allowed)
</pre></div>
</div>
<p>And one of them must be provided:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py find baz
arguments missing - the following arguments are required: --foo / -f, --bar / -b
</pre></div>
</div>
</section>
<section id="mutually-dependent">
<h2>Mutually Dependent<a class="headerlink" href="#mutually-dependent" title="Permalink to this heading"></a></h2>
<p>Mutually dependent groups provide a way to enforce that when one argument is provided for a Parameter in the group,
then arguments for all other Parameters in that group must also be provided.  Similar to mutually exclusive groups,
unless the group itself is marked as <code class="docutils literal notranslate"><span class="pre">required</span></code>, none of the members will be required if no arguments are provided
for any of the other members.</p>
<p>An example can be found <a class="reference internal" href="#mutually-dependent-example"><span class="std std-ref">below</span></a>.</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>If a command has multiple required parameters, to avoid needing to repeat <code class="docutils literal notranslate"><span class="pre">required=True</span></code> for each parameter,
they can be grouped in a <code class="docutils literal notranslate"><span class="pre">ParamGroup(mutually_dependent=True,</span> <span class="pre">required=True)</span></code>.  Since the group’s parameters are
marked as mutually dependent and the group is required, the group will require arguments to be provided for ALL of
its parameters.</p>
</div>
</section>
<section id="combining-group-types">
<h2>Combining Group Types<a class="headerlink" href="#combining-group-types" title="Permalink to this heading"></a></h2>
<p>When nesting a basic group inside of a mutually exclusive group, the members of the basic group can be combined, but
none of the inner basic group members can be combined with the members of the outer exclusive group.  Given the
following <a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/rest_api_wrapper.py">example</a> snippet:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Sync</span><span class="p">(</span><span class="n">ApiWrapper</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync group members&#39;</span><span class="p">):</span>
    <span class="n">dry_run</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-D&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Print the actions that would be taken instead of taking them&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">all</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync all groups&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">():</span>  <span class="c1"># --role and --group can be combined, but neither can be combined with --all</span>
            <span class="n">role</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">),</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync members with this role&#39;</span><span class="p">)</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-g&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync members for this group&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">prefix</span> <span class="o">=</span> <span class="s1">&#39;[DRY RUN] Would sync&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dry_run</span> <span class="k">else</span> <span class="s1">&#39;Syncing&#39;</span>
        <span class="n">roles</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">role</span> <span class="o">==</span> <span class="s1">&#39;all&#39;</span> <span class="k">else</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">role</span><span class="p">]</span>
        <span class="n">groups</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">group</span><span class="p">]</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">group</span> <span class="k">else</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span> <span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="s1">&#39;baz&#39;</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">group</span> <span class="ow">in</span> <span class="n">groups</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">role</span> <span class="ow">in</span> <span class="n">roles</span><span class="p">:</span>
                <span class="n">log</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">prefix</span><span class="si">}</span><span class="s1"> group=</span><span class="si">{</span><span class="n">group</span><span class="si">}</span><span class="s1"> members with role=</span><span class="si">{</span><span class="n">role</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can see that a member needs to be provided:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py sync
arguments missing - the following arguments are required: --all / -a, {--role / -r,--group / -g}
</pre></div>
</div>
<p>The inner group members can be combined:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ examples/rest_api_wrapper.py sync -g foo -r admin
Syncing group=foo members with role=admin
</pre></div>
</div>
<p>And neither can be combined with the mutually exclusive <code class="docutils literal notranslate"><span class="pre">--all</span></code> Parameter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py sync -g foo -a
argument conflict - the following arguments cannot be combined: --all / -a, {--role / -r,--group / -g} (they are mutually exclusive - only one is allowed)
</pre></div>
</div>
<p>Any of the valid combos can be combined with the Parameter outside of the group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py sync -g foo -D
[DRY RUN] Would sync group=foo members with role=admin
[DRY RUN] Would sync group=foo members with role=user

$ rest_api_wrapper.py sync -aD
[DRY RUN] Would sync group=foo members with role=admin
[DRY RUN] Would sync group=foo members with role=user
[DRY RUN] Would sync group=bar members with role=admin
[DRY RUN] Would sync group=bar members with role=user
[DRY RUN] Would sync group=baz members with role=admin
[DRY RUN] Would sync group=baz members with role=user
</pre></div>
</div>
<p id="mutually-dependent-example">Similarly, it is also possible to nest mutually dependent groups inside mutually exclusive groups.  Using a refactored
version of the same example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Sync</span><span class="p">(</span><span class="n">ApiWrapper</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync group members&#39;</span><span class="p">):</span>
    <span class="n">dry_run</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-D&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Print the actions that would be taken instead of taking them&#39;</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nb">all</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync all groups&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_dependent</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="n">role</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-r&#39;</span><span class="p">,</span> <span class="n">choices</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="s1">&#39;user&#39;</span><span class="p">),</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync members with this role&#39;</span><span class="p">)</span>
            <span class="n">group</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-g&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Sync members for this group&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can see the resulting output:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ rest_api_wrapper.py sync -g foo
argument missing - the following argument is required: --role / -r (because --group/-g was provided)

$ rest_api_wrapper.py sync -r admin
argument missing - the following argument is required: --group / -g (because --role/-r was provided)

$ rest_api_wrapper.py sync -r admin -g foo
Syncing group=foo members with role=admin

$ rest_api_wrapper.py sync -r admin -g foo -a
argument conflict - the following arguments cannot be combined: --all / -a, {--role / -r,--group / -g} (they are mutually exclusive - only one is allowed)
</pre></div>
</div>
<section id="how-it-works">
<h3>How it Works<a class="headerlink" href="#how-it-works" title="Permalink to this heading"></a></h3>
<p>The nesting of exclusive / dependent (and basic) groups can work either way, and they can be nested multiple levels
deep.  They can also contain nested groups of the same mutual type.</p>
<section id="mutually-exclusive-outer-group">
<h4>Mutually Exclusive Outer Group<a class="headerlink" href="#mutually-exclusive-outer-group" title="Permalink to this heading"></a></h4>
<p>Given a mutually exclusive group <code class="docutils literal notranslate"><span class="pre">A</span></code> that contains a mutually dependent group <code class="docutils literal notranslate"><span class="pre">B</span></code>, if any member of <code class="docutils literal notranslate"><span class="pre">B</span></code> is
provided, then all members of <code class="docutils literal notranslate"><span class="pre">B</span></code> must be provided, but no other members of <code class="docutils literal notranslate"><span class="pre">A</span></code> (that are not members of <code class="docutils literal notranslate"><span class="pre">B</span></code>) may
be provided.</p>
<p>Given a mutually exclusive group <code class="docutils literal notranslate"><span class="pre">A</span></code> that contains parameters <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> and a normal group <code class="docutils literal notranslate"><span class="pre">B</span></code>, which
contains parameters <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code>, then similar rules apply.  It is possible to provide any one of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>,
<code class="docutils literal notranslate"><span class="pre">c</span></code>, or <code class="docutils literal notranslate"><span class="pre">d</span></code>, but only <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> can be combined.</p>
</section>
<section id="mutually-dependent-outer-group">
<h4>Mutually Dependent Outer Group<a class="headerlink" href="#mutually-dependent-outer-group" title="Permalink to this heading"></a></h4>
<p>Given a mutually dependent group <code class="docutils literal notranslate"><span class="pre">C</span></code> that contains a mutually exclusive group <code class="docutils literal notranslate"><span class="pre">D</span></code>, if any member of <code class="docutils literal notranslate"><span class="pre">C</span></code> is
provided, then all members of <code class="docutils literal notranslate"><span class="pre">C</span></code> (that are not members of <code class="docutils literal notranslate"><span class="pre">D</span></code>) must be provided, and one and only one member of
<code class="docutils literal notranslate"><span class="pre">D</span></code> must be provided.</p>
<p>Given a mutually dependent group <code class="docutils literal notranslate"><span class="pre">A</span></code> that contains parameters <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> and a normal group <code class="docutils literal notranslate"><span class="pre">B</span></code>, which
contains parameters <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code>, then similar rules apply.  If any of <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">y</span></code>, <code class="docutils literal notranslate"><span class="pre">c</span></code>, or <code class="docutils literal notranslate"><span class="pre">d</span></code> are provided,
then <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> must always be provided, and one or both of <code class="docutils literal notranslate"><span class="pre">c</span></code> and <code class="docutils literal notranslate"><span class="pre">d</span></code> must be provided.</p>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h4>
<p>The following <a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/grouped_action_flags.py">example</a> demonstrates combinations in both directions for
nested mutually exclusive / dependent groups using <a class="reference internal" href="parameters.html#actionflag"><span class="std std-ref">ActionFlags</span></a> that simply print their
corresponding letter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">GroupedFlags</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nd">@before_main</span><span class="p">(</span><span class="s1">&#39;-a&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">action_a</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>

        <span class="nd">@before_main</span><span class="p">(</span><span class="s1">&#39;-b&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">action_b</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;b&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_dependent</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="nd">@before_main</span><span class="p">(</span><span class="s1">&#39;-c&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">action_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;c&#39;</span><span class="p">)</span>

            <span class="nd">@before_main</span><span class="p">(</span><span class="s1">&#39;-d&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">action_d</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_dependent</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
        <span class="nd">@after_main</span><span class="p">(</span><span class="s1">&#39;-w&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">action_w</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;w&#39;</span><span class="p">)</span>

        <span class="nd">@after_main</span><span class="p">(</span><span class="s1">&#39;-x&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="k">def</span> <span class="nf">action_x</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;x&#39;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">ParamGroup</span><span class="p">(</span><span class="n">mutually_exclusive</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
            <span class="nd">@after_main</span><span class="p">(</span><span class="s1">&#39;-y&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">action_y</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>

            <span class="nd">@after_main</span><span class="p">(</span><span class="s1">&#39;-z&#39;</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
            <span class="k">def</span> <span class="nf">action_z</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;z&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;main&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Example output for the mutually dependent group nested inside the mutually exclusive group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ grouped_action_flags.py -a
a
main

$ grouped_action_flags.py -ab
argument conflict - the following arguments cannot be combined: --action-a / -a, --action-b / -b (they are mutually exclusive - only one is allowed)

$ grouped_action_flags.py -abc
argument conflict - the following arguments cannot be combined: --action-a / -a, --action-b / -b, {--action-c / -c,--action-d / -d} (they are mutually exclusive - only one is allowed)

$ grouped_action_flags.py -c
argument missing - the following argument is required: --action-d / -d (because --action-c/-c was provided)

$ grouped_action_flags.py -cd
c
d
main
</pre></div>
</div>
<p>Example output for the mutually exclusive group nested inside the mutually dependent group:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ grouped_action_flags.py -w
arguments missing - the following arguments are required: --action-x / -x, {--action-y / -y,--action-z / -z} (because --action-w/-w was provided)

$ grouped_action_flags.py -wx
argument missing - the following argument is required: {--action-y / -y,--action-z / -z} (because --action-w/-w, --action-x/-x were provided)

$ grouped_action_flags.py -wxy
main
w
x
y

$ grouped_action_flags.py -wxyz
argument conflict - the following arguments cannot be combined: --action-y / -y, --action-z / -z (they are mutually exclusive - only one is allowed)
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parameters.html" class="btn btn-neutral float-left" title="Parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="subcommands.html" class="btn btn-neutral float-right" title="Subcommands" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Doug Skrypa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>