<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Commands &mdash; CLI Command Parser 2023.03.31 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/sphinx_paramlinks.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Parameters" href="parameters.html" />
    <link rel="prev" title="Getting Started" href="intro.html" />
    <link href="_static/rtd_custom.css" rel="stylesheet", type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            CLI Command Parser
          </a>
              <div class="version">
                2023.03.31
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Commands</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-commands">Defining Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="#command-methods-attributes">Command Methods &amp; Attributes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parse-run">Parse &amp; Run</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced">Advanced</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#inheritance">Inheritance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#overriding-command-methods">Overriding Command Methods</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#overriding-main">Overriding <code class="docutils literal notranslate"><span class="pre">main</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#supported-sunder-methods">Supported <code class="docutils literal notranslate"><span class="pre">_sunder_</span></code> Methods</a></li>
<li class="toctree-l4"><a class="reference internal" href="#initialization-methods">Initialization Methods</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="parameters.html">Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="groups.html">Parameter Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="subcommands.html">Subcommands</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputs.html">Input Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing Commands</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Documentation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Example Script Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Example Scripts</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CLI Command Parser</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Commands</li>
    <li class="wy-breadcrumbs-aside">
        
    </li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="commands">
<h1>Commands<a class="headerlink" href="#commands" title="Permalink to this heading"></a></h1>
<p>Commands provide a way to organize CLI applications in an intuitively object-oriented way.</p>
<p>Having parameters defined as attributes in the class results in a better developer experience when writing code that
references those attributes in an IDE.  You can take advantage of type annotations and variable name completion.
Changing the name of a parameter can take advantage of builtin renaming tools, instead of needing to hunt for
references to <code class="docutils literal notranslate"><span class="pre">args.foo</span></code> to be updated, for example.  Further, there’s no need to keep function signatures up to date
with parameters defined in decorators.</p>
<p>Since subcommands can extend their parent command, they can take advantage of standard class inheritance to share
common parameters, methods, and initialization steps with minimal extra work or code.</p>
<section id="defining-commands">
<h2>Defining Commands<a class="headerlink" href="#defining-commands" title="Permalink to this heading"></a></h2>
<p>All commands must extend the <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> class.</p>
<p>Multiple keyword-only arguments are supported when defining a subclass of Command (or a subclass thereof).  Some of
these options provide a way to include additional <a class="reference internal" href="configuration.html#command-metadata"><span class="std std-ref">Command Metadata</span></a> in help text / documentation,
while other <a class="reference internal" href="configuration.html#configuration-options"><span class="std std-ref">Configuration Options</span></a> exist to control error handling and parsing / formatting.</p>
<p><a class="reference external" href="https://github.com/dskrypa/cli_command_parser/blob/main/examples/hello_world.py">Example command</a> that uses some of those options:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span>
    <span class="n">Command</span><span class="p">,</span>
    <span class="n">description</span><span class="o">=</span><span class="s1">&#39;Simple greeting example&#39;</span><span class="p">,</span>
    <span class="n">epilog</span><span class="o">=</span><span class="s1">&#39;Contact &lt;example@fake.org&gt; with any issues&#39;</span>
<span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Option</span><span class="p">(</span><span class="s1">&#39;-n&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;World&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The person to say hello to&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Hello </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">!&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="command-methods-attributes">
<h2>Command Methods &amp; Attributes<a class="headerlink" href="#command-methods-attributes" title="Permalink to this heading"></a></h2>
<p>The primary method used to define what should happen when a command is run is <code class="docutils literal notranslate"><span class="pre">main</span></code>.  Simple commands don’t need
to implement anything else:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">HelloWorld</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The only other method names that are used by the base <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> class<a class="footnote-reference brackets" href="#id4" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> are <code class="docutils literal notranslate"><span class="pre">parse</span></code> and <code class="docutils literal notranslate"><span class="pre">parse_and_run</span></code>,
which are classmethods that are automatically used during parsing and Command initialization.  Any<a class="footnote-reference brackets" href="#id5" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a> other attribute
or method can be defined and used without affecting functionality.</p>
</section>
<section id="parse-run">
<h2>Parse &amp; Run<a class="headerlink" href="#parse-run" title="Permalink to this heading"></a></h2>
<p>When only one <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> direct subclass is present, the <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> convenience function
can be used as the primary entry point for the program:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cli_command_parser</span> <span class="kn">import</span> <span class="n">Command</span><span class="p">,</span> <span class="n">Positional</span><span class="p">,</span> <span class="n">main</span>

<span class="k">class</span> <span class="nc">Echo</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;*&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The text to print&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">text</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<p><a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> automatically<a class="footnote-reference brackets" href="#id6" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>3<span class="fn-bracket">]</span></a> finds the top-level Command that you defined, parses arguments from
<a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">sys.argv</span></code></a>, and runs your command.</p>
<p>There’s no need to call <code class="docutils literal notranslate"><span class="pre">parse</span></code> or <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.parse_and_run" title="cli_command_parser.commands.Command.parse_and_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_and_run()</span></code></a> directly, but <code class="docutils literal notranslate"><span class="pre">parse_and_run</span></code> can be used as
a drop-in replacement for <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> for a specific Command.  Using the same Echo command as in the
above example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">Echo</span><span class="o">.</span><span class="n">parse_and_run</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> and <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.parse_and_run" title="cli_command_parser.commands.Command.parse_and_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_and_run()</span></code></a> will use <a class="reference external" href="https://docs.python.org/3/library/sys.html#sys.argv" title="(in Python v3.11)"><code class="docutils literal notranslate"><span class="pre">sys.argv</span></code></a> as the source
of arguments to parse.  If desired for testing purposes, or if there is a need to modify arguments before letting them
be parsed, a list of strings may also be provided when using either approach:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">Foo</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">bar</span> <span class="o">=</span> <span class="n">Flag</span><span class="p">(</span><span class="s1">&#39;--no-bar&#39;</span><span class="p">,</span> <span class="s1">&#39;-B&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">baz</span> <span class="o">=</span> <span class="n">Positional</span><span class="p">(</span><span class="n">nargs</span><span class="o">=</span><span class="s1">&#39;+&#39;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">... </span>    <span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="gp">... </span>        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">bar</span><span class="si">=}</span><span class="s1">, </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">baz</span><span class="si">=}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="gp">...</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">Foo</span><span class="o">.</span><span class="n">parse_and_run</span><span class="p">([</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;-B&#39;</span><span class="p">])</span>
<span class="go">self.bar=False, self.baz=[&#39;test&#39;, &#39;one&#39;]</span>
</pre></div>
</div>
<hr class="docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id4" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>The only other methods that do not have <code class="docutils literal notranslate"><span class="pre">__dunder__</span></code> or <code class="docutils literal notranslate"><span class="pre">_sunder_</span></code> names.</p>
</aside>
<aside class="footnote brackets" id="id5" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">2</a><span class="fn-bracket">]</span></span>
<p>Almost any.  A <a class="reference internal" href="advanced.html#post-run-context"><span class="std std-ref">ctx</span></a> attribute is defined for convenience, but is 100% safe
to override.  See <a class="reference internal" href="#overriding-command-methods"><span class="std std-ref">Overriding Command Methods</span></a> for more info about other methods.</p>
</aside>
<aside class="footnote brackets" id="id6" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">3</a><span class="fn-bracket">]</span></span>
<p>The <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> function selects the top-level class that is known to extend <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a>,
and calls the <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.parse_and_run" title="cli_command_parser.commands.Command.parse_and_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_and_run()</span></code></a> classmethod on that discovered command class.  For more info
about how <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.main" title="cli_command_parser.commands.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">main()</span></code></a> picks that class and handles multiple commands, see its API documentation.</p>
</aside>
</aside>
</section>
<hr class="docutils" />
<section id="advanced">
<h2>Advanced<a class="headerlink" href="#advanced" title="Permalink to this heading"></a></h2>
<section id="inheritance">
<h3>Inheritance<a class="headerlink" href="#inheritance" title="Permalink to this heading"></a></h3>
<p>One of the benefits of defining Commands as classes is that we can take advantage of the standard inheritance that
Python already provides for common Parameters, methods, or initialization steps.</p>
<p>The preferred way to define a subcommand takes advantage of this in that it can be defined by
<a class="reference internal" href="subcommands.html#automatic-registration"><span class="std std-ref">extending a parent Command</span></a>.  This helps to avoid parameter name conflicts,
and it enables users to provide common options anywhere in their CLI arguments without needing to be aware of parser
behavior or how nested commands were defined.</p>
<p>Some of the benefits of being able to use inheritance for Commands, and some of the patterns that it enables, that
may require more work with other parsers:</p>
<ul>
<li><p>Logger configuration and other common initialization tasks can be handled once, automatically for all subcommands.</p></li>
<li><p>Parent Commands can define common properties and methods used (or overridden) by its subcommands.</p>
<blockquote>
<div><ul class="simple">
<li><p>A parent Command may define a <code class="docutils literal notranslate"><span class="pre">main</span></code> method that calls a method that each subcommand is expected to implement
for subcommand-specific implementations.</p></li>
<li><p>If a parent Command’s <code class="docutils literal notranslate"><span class="pre">main</span></code> implementation is able to do what is necessary for all subcommands except for one,
only that one needs to override its parent’s implementation.</p></li>
</ul>
</div></blockquote>
</li>
<li><p>If multiple subcommands share a set of common Parameters between each other that would not make sense to be defined
on the parent Command, and are not shared by other subcommands, then an intermediate subclass of their parent Command
<a class="reference internal" href="subcommands.html#shared-common-parameters"><span class="std std-ref">can be defined with those common Parameters</span></a>, which those subcommands
would then extend instead.</p></li>
</ul>
</section>
<section id="overriding-command-methods">
<h3>Overriding Command Methods<a class="headerlink" href="#overriding-command-methods" title="Permalink to this heading"></a></h3>
<p>The number of methods defined in the base <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> class is intentionally low in order to allow subclasses the
freedom to define whatever attributes and methods that they need.  The <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.__call__" title="cli_command_parser.commands.Command.__call__"><code class="xref py py-meth docutils literal notranslate"><span class="pre">__call__()</span></code></a>,
<a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.parse" title="cli_command_parser.commands.Command.parse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse()</span></code></a>, and <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.parse_and_run" title="cli_command_parser.commands.Command.parse_and_run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">parse_and_run()</span></code></a> methods are not intended to be overridden.</p>
<p>Some <code class="docutils literal notranslate"><span class="pre">_sunder_</span></code><a class="footnote-reference brackets" href="#id8" id="id7" role="doc-noteref"><span class="fn-bracket">[</span>4<span class="fn-bracket">]</span></a> methods are intended to be overridden, some are not intended to be overridden, and others may
be safe to override in some situations, but should otherwise be called via <code class="docutils literal notranslate"><span class="pre">super()</span></code> to maintain normal functionality.</p>
<section id="overriding-main">
<h4>Overriding <code class="docutils literal notranslate"><span class="pre">main</span></code><a class="headerlink" href="#overriding-main" title="Permalink to this heading"></a></h4>
<p>The vast majority of commands can safely override <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a> without calling <code class="docutils literal notranslate"><span class="pre">super().main()</span></code>.
If, however, a command uses positional <a class="reference internal" href="parameters.html#action"><span class="std std-ref">Action</span></a> methods, then that command should either not define
a <code class="docutils literal notranslate"><span class="pre">main</span></code> method (i.e., it should not override <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a>) or it should include a call of <code class="docutils literal notranslate"><span class="pre">super().main()</span></code>
to maintain the expected behavior.  The default implementation of the <code class="docutils literal notranslate"><span class="pre">main</span></code> method returns an int representing the
number of <a class="reference internal" href="parameters.html#action"><span class="std std-ref">Action</span></a> methods that were called, which can be used by subclasses calling <code class="docutils literal notranslate"><span class="pre">super().main()</span></code>
to adjust their behavior based on that result.</p>
</section>
<section id="supported-sunder-methods">
<h4>Supported <code class="docutils literal notranslate"><span class="pre">_sunder_</span></code> Methods<a class="headerlink" href="#supported-sunder-methods" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">_pre_init_actions_</span></code>: Not intended to be overridden.  Handles <code class="docutils literal notranslate"><span class="pre">--help</span></code> (and similar special actions, if defined)
and some <a class="reference internal" href="api/cli_command_parser.parameters.options.html#cli_command_parser.parameters.options.action_flag" title="cli_command_parser.parameters.options.action_flag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">action_flag</span></code></a> validation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_init_command_</span></code>: Intended to be overridden - the base implementation does not do anything.  See
<a class="reference internal" href="#using-init-command">Using _init_command_</a> for more info.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_before_main_</span></code>: If any <code class="docutils literal notranslate"><span class="pre">before_main</span></code> <a class="reference internal" href="api/cli_command_parser.parameters.options.html#cli_command_parser.parameters.options.action_flag" title="cli_command_parser.parameters.options.action_flag"><code class="xref py py-obj docutils literal notranslate"><span class="pre">action_flags</span></code></a> are defined, the original implementation
should be called via <code class="docutils literal notranslate"><span class="pre">super()._before_main_()</span></code>.  When not using any action flags, this method can safely be
overridden without calling the original.  See <a class="reference internal" href="#using-before-main">Using _before_main_</a> for more info.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">_after_main_</span></code>: Similar to <code class="docutils literal notranslate"><span class="pre">_before_main_</span></code>, the need to call the original via <code class="docutils literal notranslate"><span class="pre">super()</span></code> depends on the presence
of <code class="docutils literal notranslate"><span class="pre">after_main</span></code> action flags.  This method may be used analogously to a <code class="docutils literal notranslate"><span class="pre">finally:</span></code> clause for a command if
the <a class="reference internal" href="configuration.html#error-handling-options"><span class="std std-ref">always_run_after_main</span></a> option is enabled / True.</p></li>
</ul>
</section>
<section id="initialization-methods">
<h4>Initialization Methods<a class="headerlink" href="#initialization-methods" title="Permalink to this heading"></a></h4>
<section id="using-init-command">
<h5>Using <code class="docutils literal notranslate"><span class="pre">_init_command_</span></code><a class="headerlink" href="#using-init-command" title="Permalink to this heading"></a></h5>
<p>The recommended way to handle initializing logging, or other common initialization steps, is to do so
in <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command._init_command_" title="cli_command_parser.commands.Command._init_command_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command._init_command_()</span></code></a> - example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">BaseCommand</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">sub_cmd</span> <span class="o">=</span> <span class="n">SubCommand</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;The command to run&#39;</span><span class="p">)</span>
    <span class="n">verbose</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Increase logging verbosity (can specify multiple times)&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_init_command_</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">log_fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="si">%(name)s</span><span class="s1"> </span><span class="si">%(lineno)d</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%(message)s</span><span class="s1">&#39;</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">log_fmt</span><span class="p">)</span>
</pre></div>
</div>
<p>There is no need to call <code class="docutils literal notranslate"><span class="pre">super()._init_command_()</span></code> within the method - its default implementation does nothing.  This
method is intended to be overridden.</p>
<p>The primary reason that this method is provided is to improve user experience when they specify <code class="docutils literal notranslate"><span class="pre">--help</span></code> or an
invalid command.  Any initialization steps will incur some level of overhead, and generally no initialization
should be necessary if the user is looking for help text or if they did not provide valid arguments.  Any extra work
that is not necessary will result in a (potentially very perceptibly) slower response, regardless of the parsing
library that is used.</p>
<p>This method is called after <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command._pre_init_actions_" title="cli_command_parser.commands.Command._pre_init_actions_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command._pre_init_actions_()</span></code></a> and before <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command._before_main_" title="cli_command_parser.commands.Command._before_main_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command._before_main_()</span></code></a>.</p>
</section>
<section id="using-before-main">
<h5>Using <code class="docutils literal notranslate"><span class="pre">_before_main_</span></code><a class="headerlink" href="#using-before-main" title="Permalink to this heading"></a></h5>
<p>Before <code class="docutils literal notranslate"><span class="pre">_init_command_</span></code> was available, this was the recommended way to handle initialization steps.  That is no
longer the case.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>If <code class="docutils literal notranslate"><span class="pre">_before_main_</span></code> is overridden, it is important to make sure that <code class="docutils literal notranslate"><span class="pre">super()._before_main_()</span></code> is called from
within it.  If the <code class="docutils literal notranslate"><span class="pre">super()...</span></code> call is missed, then most <a class="reference internal" href="parameters.html#actionflag"><span class="std std-ref">before_main action flags</span></a>
will not be processed.  <code class="docutils literal notranslate"><span class="pre">--help</span></code> and other <code class="docutils literal notranslate"><span class="pre">always_available</span></code> <a class="reference internal" href="parameters.html#actionflag-init-params"><span class="std std-ref">ActionFlags</span></a>
are not affected by this method.</p>
</div>
<p>This method is called after <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command._init_command_" title="cli_command_parser.commands.Command._init_command_"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command._init_command_()</span></code></a> and before <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command.main" title="cli_command_parser.commands.Command.main"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Command.main()</span></code></a>.</p>
</section>
<section id="using-init">
<h5>Using <code class="docutils literal notranslate"><span class="pre">__init__</span></code><a class="headerlink" href="#using-init" title="Permalink to this heading"></a></h5>
<p>If you don’t mind the extra overhead before <code class="docutils literal notranslate"><span class="pre">--help</span></code>, or if you have <code class="docutils literal notranslate"><span class="pre">always_available</span></code>
<a class="reference internal" href="parameters.html#actionflag-init-params"><span class="std std-ref">ActionFlags</span></a> that require the same initialization steps as the rest of the Command,
then you can include those initialization steps in <code class="docutils literal notranslate"><span class="pre">__init__</span></code> instead.  The base <a class="reference internal" href="api/cli_command_parser.commands.html#cli_command_parser.commands.Command" title="cli_command_parser.commands.Command"><code class="xref py py-class docutils literal notranslate"><span class="pre">Command</span></code></a> class
has no <code class="docutils literal notranslate"><span class="pre">__init__</span></code> method, so there is no need to call <code class="docutils literal notranslate"><span class="pre">super().__init__()</span></code> if you define it - example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Base</span><span class="p">(</span><span class="n">Command</span><span class="p">):</span>
    <span class="n">sub_cmd</span> <span class="o">=</span> <span class="n">SubCommand</span><span class="p">()</span>
    <span class="n">verbose</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Increase logging verbosity (can specify multiple times)&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">log_fmt</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%(asctime)s</span><span class="s1"> </span><span class="si">%(levelname)s</span><span class="s1"> </span><span class="si">%(name)s</span><span class="s1"> </span><span class="si">%(lineno)d</span><span class="s1"> </span><span class="si">%(message)s</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="s1">&#39;</span><span class="si">%(message)s</span><span class="s1">&#39;</span>
        <span class="n">level</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">verbose</span> <span class="k">else</span> <span class="n">logging</span><span class="o">.</span><span class="n">INFO</span>
        <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">level</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="n">log_fmt</span><span class="p">)</span>
</pre></div>
</div>
<hr class="docutils" />
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id8" role="note">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id7">4</a><span class="fn-bracket">]</span></span>
<p>Why <code class="docutils literal notranslate"><span class="pre">_sunder_</span></code> names? Mostly for the same reason that <a class="reference external" href="https://stackoverflow.com/a/52006681/19070573">the Enum module uses them</a>.</p>
</aside>
</aside>
</section>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="intro.html" class="btn btn-neutral float-left" title="Getting Started" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="parameters.html" class="btn btn-neutral float-right" title="Parameters" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Doug Skrypa.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>